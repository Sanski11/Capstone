<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Homepage-Staff</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="header">
    <h1>Homepage - Staff</h1>
    <nav class="nav">
      <a href="#">Requests</a>
      <a href="#">Rooms</a>
      <a href="#">Services</a>
      <a href="#">Guests</a>
      <a href="#">Check-in/Checkout</a>
      <a href="#">Staff</a>
    </nav>
    
    <div class="dropdown">
    <img src="{{ url_for('static', filename='images/profile-icon.svg') }}" alt="Profile" class="profile-icon" onclick="toggleDropdown()">
    <div id="dropdownMenu" class="dropdown-menu">
      <a href="/profile">Profile</a>
      <a href="/logout">Logout</a>
    </div>
  </div>
  </div>

  <section class="chart-section">
    <canvas id="barChart" width="400" height="200"></canvas>
    <h2>Daily Staff Activity</h2>
  </section>

  <section class="chart-section">
    <canvas id="pieChart" width="200" height="200"></canvas>
    <h2>Daily Requests</h2>
  </section>

  <section class="stats-box">
    <table>
      <tr><td>No. of Reserved rooms</td><td>{{ stats.reserved }}</td></tr>
      <tr><td>No. of Occupied rooms</td><td>{{ stats.occupied }}</td></tr>
      <tr><td>No. of Housekeeping staff on Duty</td><td>{{ stats.housekeeping }}</td></tr>
      <tr><td>No. of Food Staff on Duty</td><td>{{ stats.food }}</td></tr>
      <tr><td>No. of Laundry Staff on Duty</td><td>{{ stats.laundry }}</td></tr>
      <tr><td>No. of Spa Staff on Duty</td><td>{{ stats.spa }}</td></tr>
    </table>
  </section>

  <script>
    const barChart = new Chart(document.getElementById('barChart'), {
      type: 'bar',
      data: {
        labels: ['Staff a', 'Staff b', 'Staff c', 'Staff d'],
        datasets: [
          {
            label: 'Requests',
            data: [10, 3, 9, 5],
            backgroundColor: 'skyblue'
          },
          {
            label: 'Completed',
            data: [2, 6, 9, 4],
            backgroundColor: 'coral'
          }
        ]
      }
    });

    const pieChart = new Chart(document.getElementById('pieChart'), {
      type: 'pie',
      data: {
        labels: ['Housekeeping', 'Food', 'Laundry', 'Massage'],
        datasets: [{
          data: [59, 25, 10, 6],
          backgroundColor: ['#4fd1c5', '#81e6d9', '#63b3ed', '#a0aec0']
        }]
      }
    });

  function toggleDropdown() {
    var menu = document.getElementById("dropdownMenu");
    menu.style.display = (menu.style.display === "block") ? "none" : "block";
  }

  // Optional: Close dropdown if clicking outside
  window.onclick = function(event) {
    if (!event.target.matches('.profile-icon')) {
      var dropdowns = document.getElementsByClassName("dropdown-menu");
      for (var i = 0; i < dropdowns.length; i++) {
        dropdowns[i].style.display = "none";
      }
    }
  }
  </script>
</body>
</html>
