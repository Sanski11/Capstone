<!DOCTYPE html>
<html>
<head>
  <title>Page</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-5">
    <h1 class="mb-4">Check-in</h1>

    <table class="table table-striped table-bordered">
      <thead class="table-dark">
        <tr>
          <th>Room ID</th>
          <th>Room Number</th>
          <th>Action</th>
          <th>Room Type</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for room in rooms %}
        <tr>
          <td>{{ room.room_id }}</td>
          <td>{{ room.room_number }}</td>
          <td>
            <a href="#"><i class="bi bi-pencil-square"></i></a>
            <a href="#" class="text-danger ms-2"><i class="bi bi-trash-fill"></i></a>
            {% if room.status == 'Occupied' %}
            <form action="/checkout" method="POST" style="display:inline;">
              <input type="hidden" name="booking_id" value="{{ room.booking_id }}">
              <input type="datetime-local" name="actual_check_out" required>
              <button type="submit" class="btn btn-sm btn-warning ms-2">Checkout</button>
            </form>
            {% endif %}
          </td>
          <td>{{ room.room_type }}</td>
          <td>{{ room.status }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <a href="/dashboard" class="btn btn-secondary mt-3">‚Üê Back to Homepage</a>

    <form action="" method="POST" class="mt-5">
      <input type="hidden" name="booking_id" value="{{ booking_id }}">
      <div class="mb-3">
        <label for="amount" class="form-label">Amount:</label>
        <input type="number" class="form-control" id="amount" name="amount" required>
      </div>
      <div class="mb-3">
        <label for="payment_date" class="form-label">Payment Date:</label>
        <input type="datetime-local" class="form-control" id="payment_date" name="payment_date" required>
      </div>
      <div class="mb-3">
        <label for="payment_method" class="form-label">Payment Method:</label>
        <select id="payment_method" name="payment_method" class="form-control" required>
          <option value="Cash">Cash</option>
          <option value="Credit Card">Credit Card</option>
          <option value="Online">Online</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="status" class="form-label">Status:</label>
        <select id="status" name="status" class="form-control" required>
          <option value="Paid">Paid</option>
          <option value="Pending">Pending</option>
          <option value="Failed">Failed</option>
        </select>
      </div>
      <button type="submit" class="btn btn-success">Submit Payment</button>
    </form>

    {% if session['role'] == 'admin' %}
    <div class="mt-5">
      <h2>Admin Actions</h2>
      <a href="#" class="btn btn-primary">Add Room</a>
      <a href="#" class="btn btn-secondary">Edit Room</a>
      <a href="#" class="btn btn-danger">Delete Room</a>
    </div>
    {% endif %}
  </div>
</body>
</html>